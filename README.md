# sudoku

Build and Run
--
```
stack build

stack exec sudoku-exe
```

Команды для управления игрой
--

* Перезапускать игру
  * Создать новую игру с тем же уровнем сложности
    `Shift` + `N`
  * Создать новую игру с менее сложным уровнем
    `Shift` + `E`
  * Создать новую игру с более сложным уровнем
    `Shift` + `H`
* Вводить числа
  * Цифры на кватиатуре `1` - `9`
  * Цифры нарисованные под полем игры
* Закрыть приложение `Esc`

Краткое описание структуры проекта
--
Проект логически разбит на 3 модуля.
  1. `Generator` - модуль, в котором создается игровое поле. Вдохновлялся [этой статьей](https://habr.com/ru/post/192102/).
  2. `UI` - модуль, в котором собирается интерфейс
   * [MainUI](src/UI/MainUI.hs) - главный файл, в который передается сгенерированная игра и генеруется интерфейс. 
   * [FieldRender](src/UI/FieldRender.hs) - отрисовывает игровое поле
   * [InformationRender](src/UI/InformationRender.hs) - отрисовывает текущую информацию об игре

  3. Файлы `Sudoku` и `EventHandler` занимаются созданием игры и обработки событий. 
  
Подробнее про процесс создание игры
--
Сначала вызывается функция [makeNewGame](src/Sudoku.hs#L25), которая генерируется рандомную бесконечную 
последовательность для создания игры. Эта функция вызывается ровно один раз за все время работы приложения. 
Она генерирует две последовательности [GeneratorStep](src/Generator/GeneratorUtil.hs#L32) для создания поля
и [CellIndex](src/Generator/GeneratorUtil.hs#L29) для скрытия подсказок. 
Далее с этими параметрами будем работать в [GeneratorEnv](src/Generator/GeneratorUtil.hs#L80).

После регенации случайным последовательностей создаются поле для игры [FieldGenerator](src/Generator/FieldGenerator.hs) и выбираются подсказки [GameGenerator](src/Generator/GameGenerator.hs).

Потом вызывается [runUI](src/UI/MainUI.hs#L27) для создания интерфейса. Все UI события обрабатываются [здесь](src/UI/MainUI.hs#L65).
